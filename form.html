<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Form Usulan â€“ Berseri</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{ --primary:#065F46; --border:#E5E7EB; --bg-soft:#F7FAF7; }
    body{ font-size:18px; }
    /* Tombol */
    .btn { min-height:48px; display:inline-flex; align-items:center; justify-content:center; padding:12px 20px; border-radius:12px; font-weight:600; }
    .btn-primary { color:#fff; background:#065F46; border:2px solid #065F46; }
    .btn-primary:hover { filter: brightness(1.05); }
    .btn-secondary { background:#fff; color:#065F46; border:2px solid #065F46; }
    .btn-secondary:hover { background:#D1FAE5; }
    /* Input */
    .input { width:100%; border:1px solid var(--border); border-radius:12px; padding:12px; }
    .input:focus { outline:3px solid #10B98133; border-color:#10B981; }
    .label { display:block; font-weight:600; margin-bottom:6px; color:#065F46; }
    .help { display:block; font-size:0.875rem; color:#6B7280; margin-top:6px; }
    .field { margin-bottom:18px; }

    /* Add card styling */
    .card {
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 16px;
    }

    /* Adjust spacing */
    .form-step {
      margin-bottom: 2rem;
    }

    /* Button and nav link animations */
    .nav-link {
  position: relative;
  padding: 0.5rem 0.75rem;
  border-radius: 8px;
  transition: all 0.3s ease;
  background-color: transparent;
}

.nav-link:hover {
  background-color: #D1FAE5; /* Light green background */
  color: #065F46; /* Dark green text */
  animation: gentleShake 0.3s ease-in-out;
}

/* Animation for gentle shake */
@keyframes gentleShake {
  0% { transform: translateY(0); }
  25% { transform: translateY(-2px); }
  75% { transform: translateY(2px); }
  100% { transform: translateY(0); }
}

/* Button hover animations */
.btn {
  transition: all 0.3s ease;
}

.btn-primary:hover {
  background-color: #064E3B;
  border-color: #064E3B;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(6, 95, 70, 0.2);
}

.btn-secondary:hover {
  background-color: #D1FAE5;
  color: #065F46;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(6, 95, 70, 0.1);
}

/* Dropdown hover effects */
.group:hover .hidden {
  display: block;
}

.group div {
  transform-origin: top;
  transform: scale(0.95);
  transition: all 0.1s ease-out;
}

.group:hover div {
  transform: scale(1);
  opacity: 1;
}

/* Ensure dropdown is above other content */
.relative {
  position: relative;
  z-index: 50;
}
  </style>
  <style>
  @keyframes marquee {
    0% { transform: translateX(100%); }
    100% { transform: translateX(-100%); }
  }
  .animate-marquee {
    display: inline-block;
    min-width: 100%;
    animation: marquee 15s linear infinite;
    will-change: transform;
  }
  .animate-marquee:hover {
    animation-play-state: paused;
  }

    /* Custom dropdown sizing */
    select#kabkota {
        max-height: 160px !important; /* Reduce from 200px */
        width: 100%;
        overflow-y: auto;
        padding-right: 24px; /* Space for scrollbar */
    }

    /* Custom scrollbar styling */
    select.input {
        scrollbar-width: thin;
        scrollbar-color: #065F46 #ffffff;
    }
    
    select.input::-webkit-scrollbar {
        width: 6px; /* Reduced from 8px */
    }
    
    select.input::-webkit-scrollbar-track {
        background: #ffffff;
        border-radius: 4px;
    }
    
    select.input::-webkit-scrollbar-thumb {
        background-color: #065F46;
        border-radius: 4px;
        border: 1px solid #ffffff; /* Reduced from 2px */
    }
    
    /* Dropdown styling */
    select.input option {
        padding: 6px 8px; /* Reduced top/bottom padding */
        font-size: 14px; /* Slightly smaller font */
    }
    
    select.input option:hover {
        background-color: #D1FAE5;
    }

    /* Adjust dropdown icon position */
select.input {
    background-position: right 0.75rem center; /* Move icon more to the left */
    padding-right: 2rem; /* Reduce right padding */
}

/* Remove the default select arrow */
select.input {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: none !important; /* Remove the CSS background arrow */
    padding-right: 2.5rem;
}

/* Custom positioning for select elements */
.field select {
    background-image: none !important; /* Remove the CSS background arrow */
}

/* Remove any existing select styling that might conflict */
select.input {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    padding-right: 2.5rem; /* Make space for the icon */
}

/* Ensure the icon stays in position */
.field .relative svg {
    pointer-events: none;
    z-index: 1;
}
</style>

  <link rel="icon" type="image/png" href="assets/logo.png" />
</head>
<body class="bg-white min-h-screen">
  
  <!-- Banner Atas (teks berjalan) -->
<div id="banner-top" class="w-full bg-gray-100 border-b border-gray-200 overflow-hidden">
  <div class="whitespace-nowrap animate-marquee py-2 text-gray-700 text-sm font-medium">
    ðŸŒ¿ Selamat datang di Program Berseri (Bersih & Lestari) â€“ DLH Provinsi Jawa Timur â€¢ 
    ðŸ“¢ Pendaftaran gelombang pertama telah dibuka â€¢ 
    ðŸŒ± Mari wujudkan desa bersih, sehat, dan lestari bersama!
  </div>
</div>

  <a href="#main" class="sr-only focus:not-sr-only focus:absolute top-2 left-2 bg-white text-emerald-700 px-3 py-2 rounded">Lewati ke konten utama</a>

  <header class="bg-white border-b sticky top-0 z-[2000]" role="banner" style="border-color: var(--border)">
  <nav class="max-w-7xl mx-auto px-4 lg:px-6 py-4" role="navigation" aria-label="Navigasi utama">
    <div class="flex items-center justify-between gap-4">
      <a href="index.html" class="flex items-center gap-3" aria-label="Berseri Beranda">
        <!-- Update image sizes to h-16 -->
        <img src="Asset/logo-berseri.png" alt="Logo Berseri" class="h-16">
        <img src="Asset/Logo Kata Berseri.png" alt="Logo DLH" class="h-16">
      </a>

      <!-- Add the navigation buttons -->
      <ul class="hidden md:flex items-center gap-2">
        <li><a href="index.html" class="nav-link font-semibold text-[var(--muted)]">Beranda</a></li>
        <li><a href="tentang.html" class="nav-link font-semibold text-[var(--muted)]">Tentang</a></li>
        
        <li class="relative group">
          <button class="nav-link font-semibold text-[var(--muted)] flex items-center gap-1">
            Data
            <!-- Keep this arrow icon in your HTML -->
<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>
          </button>
          <div class="absolute left-0 hidden group-hover:block mt-1 w-48 bg-white border rounded-lg shadow-lg py-2">
            <a href="detail-berseri.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-emerald-50 hover:text-emerald-700">Detail Berseri</a>
            <a href="kabupaten-kota.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-emerald-50 hover:text-emerald-700">Kabupaten/Kota</a>
        </li>
        
        <li><a href="panduan.html" class="nav-link font-semibold text-[var(--muted)]">Panduan</a></li>
        <li><a href="pengumuman.html" class="nav-link font-semibold text-[var(--muted)]">Pengumuman</a></li>
        <li><a href="dashboard.html" class="btn btn-primary no-underline">Dashboard</a></li>
      </ul>
    </div>
  </nav>
</header>

  <main id="main" class="max-w-3xl mx-auto px-4 py-8">
    <!-- Progress -->
    <div id="progressBar" class="w-full bg-gray-200 rounded-full h-3 mb-8" aria-hidden="true">
      <div id="progressFill" class="bg-emerald-700 h-3 rounded-full" style="width:10%"></div>
    </div>

    <form id="usulanForm" novalidate>
      <!-- STEP 1 (identitas desa) -->
      <div class="form-step space-y-6">
        <!-- Add card wrapper -->
        <section class="card p-6">
          <h2 class="text-xl font-bold text-emerald-800 mb-4">Identitas Desa/Kelurahan</h2>
          <div class="space-y-5">
            <div class="field">
              <label for="email" class="label">Email</label>
              <input id="email" name="email" type="email" class="input" required placeholder="contoh@email.com">
              <span class="help">Kami akan mengirimkan notifikasi ke email ini.</span>
            </div>

            <div class="field">
              <span class="label">Apakah Anda dari Desa atau Kelurahan?</span>
              <div class="flex gap-6 mt-2">
                <label class="inline-flex items-center gap-2">
                  <input type="radio" name="tipe_wilayah" value="desa" required class="h-4 w-4 text-emerald-600">
                  <span>Desa</span>
                </label>
                <label class="inline-flex items-center gap-2">
                  <input type="radio" name="tipe_wilayah" value="kelurahan" required class="h-4 w-4 text-emerald-600">
                  <span>Kelurahan</span>
                </label>
              </div>
            </div>

            <div class="field">
              <label for="nama-desa" class="label">Nama Desa/Kelurahan</label>
              <input id="nama-desa" name="nama_desa" type="text" class="input uppercase" required placeholder="Cth: SUDIMORO">
            </div>

            <div class="field">
              <label for="kecamatan" class="label">Kecamatan</label>
              <input id="kecamatan" name="kecamatan" type="text" class="input uppercase" required placeholder="Cth: KECAMATAN ABC">
            </div>

            <!-- Update the select element and its wrapper -->
<div class="field relative">
    <label for="kabkota" class="label">Kabupaten/Kota</label>
    <div class="relative">
        <select id="kabkota" name="kabkota" class="input pr-10" required>
            <option value="">Pilih Kabupaten/Kota</option>
            <option>Kabupaten Pacitan</option>
            <option>Kabupaten Ponorogo</option>
            <option>Kabupaten Trenggalek</option>
            <option>Kabupaten Tulungagung</option>
            <option>Kabupaten Blitar</option>
            <option>Kabupaten Kediri</option>
            <option>Kabupaten Malang</option>
            <option>Kabupaten Lumajang</option>
            <option>Kabupaten Jember</option>
            <option>Kabupaten Banyuwangi</option>
            <option>Kabupaten Bondowoso</option>
            <option>Kabupaten Situbondo</option>
            <option>Kabupaten Probolinggo</option>
            <option>Kabupaten Pasuruan</option>
            <option>Kabupaten Sidoarjo</option>
            <option>Kabupaten Mojokerto</option>
            <option>Kabupaten Jombang</option>
            <option>Kabupaten Nganjuk</option>
            <option>Kabupaten Madiun</option>
            <option>Kabupaten Magetan</option>
            <option>Kabupaten Ngawi</option>
            <option>Kabupaten Bojonegoro</option>
            <option>Kabupaten Tuban</option>
            <option>Kabupaten Lamongan</option>
            <option>Kabupaten Gresik</option>
            <option>Kabupaten Bangkalan</option>
            <option>Kabupaten Sampang</option>
            <option>Kabupaten Pamekasan</option>
            <option>Kabupaten Sumenep</option>
            <option>Kota Kediri</option>
            <option>Kota Blitar</option>
            <option>Kota Malang</option>
            <option>Kota Probolinggo</option>
            <option>Kota Pasuruan</option>
            <option>Kota Mojokerto</option>
            <option>Kota Madiun</option>
            <option>Kota Surabaya</option>
            <option>Kota Batu</option>
          </select>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </div>
      </div>

            <div class="field">
              <label for="kades" class="label">Nama Kades/Lurah</label>
              <input id="kades" name="kades" type="text" class="input uppercase" required placeholder="Cth: Drs. BUDI SANTOSO, M.Si">
            </div>

            <div class="field">
              <label for="alamat" class="label">Alamat Kantor Desa/Kelurahan</label>
              <textarea id="alamat" name="alamat" class="input" rows="2" required></textarea>
            </div>

            <div class="field">
              <label for="hp" class="label">No. Handphone Kades/Lurah</label>
              <input id="hp" name="hp" type="tel" class="input" required placeholder="08xxxxxxxxxx">
            </div>

            <div class="field">
              <span class="label">Mengusulkan ke Kategori</span>
              <div class="flex flex-wrap gap-6 mt-2">
                <label class="inline-flex items-center gap-2"><input type="radio" name="kategori" value="Pratama" required> <span>Pratama</span></label>
                <label class="inline-flex items-center gap-2"><input type="radio" name="kategori" value="Madya" required> <span>Madya</span></label>
                <label class="inline-flex items-center gap-2"><input type="radio" name="kategori" value="Mandiri" required> <span>Mandiri</span></label>
              </div>
            </div>

            <div class="field">
              <label for="ketua" class="label">Nama Ketua Kader Lingkungan</label>
              <input id="ketua" name="ketua" type="text" class="input" required placeholder="Nama Ketua Kader">
            </div>

            <div class="field">
              <label for="jumlah_kader" class="label">Jumlah Kader Lingkungan</label>
              <input id="jumlah_kader" name="jumlah_kader" type="number" inputmode="numeric" min="0" class="input" required placeholder="contoh: 12">
            </div>

            <div class="field">
              <label for="studi" class="label">Lokasi Studi Banding</label>
              <input id="studi" name="studi" type="text" class="input" required placeholder="Isi '-' jika belum pernah">
            </div>

            <!-- Update the grid sections for all titik pantau -->
            <div class="grid md:grid-cols-2 gap-4">
              <!-- Titik Pantau 1 -->
              <div class="field">
                <label class="label">Titik Pantau 1</label>
                <div class="grid grid-cols-2 items-start gap-2 relative">
                  <div>
                    <div class="text-sm text-red-600 mb-1">*Masukkan RW</div>
                    <input id="titik1_rw" name="titik1_rw" type="text" class="input" required placeholder="RW (cth: RW 1)">
                  </div>
                  <!-- Add separator line -->
                  <div class="absolute left-1/2 top-7 bottom-2 w-px bg-gray-300"></div>
                  <div>
                    <div class="text-sm text-red-600 mb-1">*Masukkan RT</div>
                    <input id="titik1_rt" name="titik1_rt" type="text" class="input" required placeholder="RT (cth: 2,3,4)">
                  </div>
                </div>
              </div>

              <!-- Titik Pantau 2 -->
              <div class="field">
                <label class="label">Titik Pantau 2</label>
                <div class="grid grid-cols-2 items-start gap-2 relative">
                  <div>
                    <div class="text-sm text-red-600 mb-1">*Masukkan RW</div>
                    <input id="titik2_rw" name="titik2_rw" type="text" class="input" required placeholder="RW (cth: RW 2)">
                  </div>
                  <div class="absolute left-1/2 top-7 bottom-2 w-px bg-gray-300"></div>
                  <div>
                    <div class="text-sm text-red-600 mb-1">*Masukkan RT</div>
                    <input id="titik2_rt" name="titik2_rt" type="text" class="input" required placeholder="RT (cth: 3,4,5)">
                  </div>
                </div>
              </div>

              <!-- Titik Pantau 3 -->
              <div class="field">
                <label class="label">Titik Pantau 3</label>
                <div class="grid grid-cols-2 items-start gap-2 relative">
                  <div>
                    <div class="text-sm text-red-600 mb-1">*Masukkan RW</div>
                    <input id="titik3_rw" name="titik3_rw" type="text" class="input" required placeholder="RW (cth: RW 3)">
                  </div>
                  <div class="absolute left-1/2 top-7 bottom-2 w-px bg-gray-300"></div>
                  <div>
                    <div class="text-sm text-red-600 mb-1">*Masukkan RT</div>
                    <input id="titik3_rt" name="titik3_rt" type="text" class="input" required placeholder="RT (cth: 1,2,3)">
                  </div>
                </div>
              </div>

              <!-- Titik Pantau 4 -->
              <div class="field">
                <label class="label">Titik Pantau 4</label>
                <div class="grid grid-cols-2 items-start gap-2 relative">
                  <div>
                    <div class="text-sm text-red-600 mb-1">*Masukkan RW</div>
                    <input id="titik4_rw" name="titik4_rw" type="text" class="input" required placeholder="RW (cth: RW 4)">
                  </div>
                  <div class="absolute left-1/2 top-7 bottom-2 w-px bg-gray-300"></div>
                  <div>
                    <div class="text-sm text-red-600 mb-1">*Masukkan RT</div>
                    <input id="titik4_rt" name="titik4_rt" type="text" class="input" required placeholder="RT (cth: 1,2,3)">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <!-- STEP 2 (data sampah & pengelolaan â€“ 2024) -->
      <div class="form-step hidden space-y-6">
        <section class="card p-6">
          <h2 class="text-xl font-bold text-emerald-800 mb-4">Data Sampah & Pengelolaan</h2>
          <div class="space-y-5">
            <div class="p-4 rounded-xl border bg-[var(--bg-soft)]">
              <p class="m-0 text-emerald-800 font-semibold">JUMLAH TIMBULAN SAMPAH DI DESA/KELURAHAN (kg/bulan)</p>
              <p class="help">
                <strong>Catatan perhitungan:</strong>
                Timbulan = <em>Jumlah Penduduk</em> Ã— <em>Estimasi Timbulan (kg/org/hari)</em> Ã— <em>30 hari</em>.
              </p>
              
             <p class="m-0 text-emerald-800 font-semibold mt-3">
               Estimasi Timbulan Sampah berdasarkan Peraturan Menteri LHK No.6 Tahun 2022 tentang SIPSN, sebagai berikut:
              </p>
              
              <ul class="list-disc pl-6 help">
                <li>Kota Kecil â‰ˆ <strong>0,4</strong> kg/org/hari</li>
                <li>Kota Sedang â‰ˆ <strong>0,5</strong> kg/org/hari</li>
                <li>Kota Besar â‰ˆ <strong>0,6</strong> kg/org/hari</li>
                <li>Kota Metropolitan â‰ˆ <strong>0,7</strong> kg/org/hari</li>
              </ul>
            </div>

            <!-- Grid: Jumlah Penduduk, Estimasi, Hasil Perkiraan (simetris di desktop) -->
            <div class="grid md:grid-cols-3 gap-6 items-start">
              <!-- Kolom 1 -->
              <div class="field">
                <label for="penduduk" class="label">Jumlah Penduduk</label>
                <input id="penduduk" name="penduduk" type="number" inputmode="numeric" min="0"
                       class="input h-12" placeholder="cth: 3500">
                <span class="help min-h-[20px]">&nbsp;</span>
              </div>

              <!-- Kolom 2 -->
              <div class="field">
                <label for="estimasi" class="label">Estimasi Timbulan (kg/org/hari)</label>
                <select id="estimasi" name="estimasi" class="input h-12">
                  <option value="">Pilih Estimasi (Permen LHK 6/2022)</option>
                  <option value="0.4">Kota Kecil â‰ˆ 0.4</option>
                  <option value="0.5">Kota Sedang â‰ˆ 0.5</option>
                  <option value="0.6">Kota Besar â‰ˆ 0.6</option>
                  <option value="0.7">Kota Metropolitan â‰ˆ 0.7</option>
                </select>
                <span class="help min-h-[20px]">&nbsp;</span>
              </div>

              <!-- Kolom 3 -->
              <div class="field">
                <label for="timbulan_total" class="label">Hasil Perkiraan (kg/bulan)</label>
                <input id="timbulan_total" name="timbulan_total" type="number"
                       class="input h-12 bg-gray-100" placeholder="otomatis dari kalkulator" readonly>
                <span class="help min-h-[20px]">Otomatis dihitung dari Jumlah Penduduk Ã— Estimasi Ã— 30 hari.</span>
              </div>
            </div>

            <div class="field">
              <label for="pengurangan_2024" class="label">JUMLAH PENGURANGAN SAMPAH TAHUN 2024 (kg/bulan)</label>
              <input id="pengurangan_2024" name="pengurangan_2024" type="number" inputmode="decimal" min="0" step="any" class="input" placeholder="cth: 3500" required>
              <span class="help">Hasil pengelolaan: komposter, bank sampah, biopori, maggot, dll selama 2024.</span>
            </div>

            <div class="field">
              <span class="label">Apakah memiliki TPS3R/TPST?</span>
              <div class="flex gap-6 mt-2">
                <label class="inline-flex items-center gap-2">
                  <input type="radio" name="punya_tps" value="ya" class="h-4 w-4 text-emerald-600">
                  <span>Ya</span>
                </label>
                <label class="inline-flex items-center gap-2">
                  <input type="radio" name="punya_tps" value="tidak" class="h-4 w-4 text-emerald-600">
                  <span>Tidak</span>
                </label>
              </div>
            </div>

            <div id="wrap_masuk_tps" class="field hidden">
              <label for="masuk_tps_2024" class="label">SAMPAH MASUK DI TPS3R/TPST TAHUN 2024 (kg/bulan)</label>
              <input id="masuk_tps_2024" name="masuk_tps_2024" type="number" inputmode="decimal" min="0" step="any" class="input" placeholder="cth: 1200">
            </div>
          </div>
        </section>
      </div>

      <!-- STEP 3: (opsional) ringkasan -->
      <div class="form-step hidden space-y-6">
        <section class="card p-6">
          <h2 class="text-xl font-bold text-emerald-800 mb-4">Ringkasan</h2>
          <div class="space-y-5">
            <div>
              <label for="ringkasan" class="label">Ringkasan Usulan (opsional)</label>
              <textarea id="ringkasan" name="ringkasan" class="input" rows="4" placeholder="Tulis ringkasan singkat..."></textarea>
              <span class="help">Sampaikan inti kegiatan, sasaran, dan manfaat secara singkat.</span>
            </div>
          </div>
        </section>
      </div>

      <!-- STEP 4: pratinjau -->
      <div class="form-step hidden">
        <p class="mb-4">Pratinjau data usulan Anda sebelum dikirim.</p>
        <ul class="list-disc pl-6 text-gray-700 space-y-1">
          <li>Pastikan identitas & lokasi sudah benar.</li>
          <li>Periksa data timbulan/pengelolaan sampah.</li>
          <li>Siapkan dokumen pendukung di langkah berikutnya.</li>
        </ul>
      </div>

      <!-- STEP 5 (TERAKHIR): FILE PENDUKUNG -->
      <div class="form-step hidden space-y-4">
        <!-- Header merah muda seperti contoh -->
        <div class="rounded-t-xl bg-red-200 text-red-900 px-4 py-3 font-bold tracking-wide">FILE PENDUKUNG</div>

        <!-- Kartu 1 -->
        <div class="rounded-xl border bg-white p-4 shadow-sm">
          <div class="font-semibold text-gray-900">
            FOTO KEPALA DESA/LURAH <span class="text-red-600">*</span>
          </div>
          <div class="text-sm text-red-600 mb-1">*Wajib diisi</div>
          <div class="text-sm text-gray-500 mt-2">Upload 1 file yang didukung. Maks 1 MB.</div>

          <div class="mt-4">
            <input id="file_foto" type="file" accept=".jpg,.jpeg,.png" class="hidden" required>
            <button type="button" data-pick="#file_foto" class="inline-flex items-center gap-2 border rounded-xl px-3 py-2 text-emerald-700 border-emerald-200 hover:bg-emerald-50">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M7 17h10v2H7zm5-14 5 5h-3v4h-4V8H7z"/></svg>
              Tambahkan file
            </button>
            <div id="file_foto_name" class="text-sm text-gray-700 mt-2"></div>
          </div>
        </div>

        <!-- Kartu 2 -->
        <div class="rounded-xl border bg-white p-4 shadow-sm">
          <div class="font-semibold text-gray-900">
            SERTIFIKAT STUDI BANDING <span class="text-red-600">*</span>
          </div>
          <div class="text-sm text-red-600 mb-1">*Wajib diisi</div>
          <div class="text-sm text-gray-500 mt-2">Upload 1 file yang didukung. Maks 1 MB.</div>

          <div class="mt-4">
            <input id="file_sertifikat" type="file" accept=".jpg,.jpeg,.png,.pdf" class="hidden" required>
            <button type="button" data-pick="#file_sertifikat" class="inline-flex items-center gap-2 border rounded-xl px-3 py-2 text-emerald-700 border-emerald-200 hover:bg-emerald-50">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M7 17h10v2H7zm5-14 5 5h-3v4h-4V8H7z"/></svg>
              Tambahkan file
            </button>
            <div id="file_sertifikat_name" class="text-sm text-gray-700 mt-2"></div>
          </div>
        </div>

        <!-- Kartu 3 -->
        <div class="rounded-xl border bg-white p-4 shadow-sm">
          <div class="font-semibold text-gray-900">PIAGAM PENGHARGAAN DESA/KELURAHAN BERSERI YANG SUDAH DIDAPATKAN</div>
          <div class="text-sm text-gray-500 mt-2">Upload 1 file yang didukung. Maks 10 MB.</div>

          <div class="mt-4">
            <input id="file_piagam" type="file" accept=".jpg,.jpeg,.png,.pdf" class="hidden">
            <button type="button" data-pick="#file_piagam" class="inline-flex items-center gap-2 border rounded-xl px-3 py-2 text-emerald-700 border-emerald-200 hover:bg-emerald-50">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M7 17h10v2H7zm5-14 5 5h-3v4h-4V8H7z"/></svg>
              Tambahkan file
            </button>
            <div id="file_piagam_name" class="text-sm text-gray-700 mt-2"></div>
          </div>
        </div>

        <p class="text-sm text-gray-500">Format didukung: JPG, PNG, PDF. Ukuran mengikuti keterangan tiap dokumen.</p>
      </div>

      <!-- Navigasi -->
      <div class="mt-8 grid gap-3 sm:grid-cols-[1fr_auto] sm:items-center"> 
        <button type="button" id="prevBtn" class="btn btn-secondary w-full sm:w-auto">Sebelumnya</button>
        <div class="flex flex-col sm:flex-row gap-3 w-full sm:w-auto sm:justify-end">
          <button type="button" id="saveDraftBtn" class="btn btn-secondary w-full sm:w-auto">Simpan Draft</button>
          <button type="button" id="nextBtn" class="btn btn-primary w-full sm:w-auto">Berikutnya</button>
          <button type="submit" id="submitBtn" class="btn btn-primary hidden w-full sm:w-auto">Kirim</button>
        </div>
      </div>
    </form>
  </main>
  
    <!-- Footer -->
    <footer class="bg-emerald-800 text-white py-12 mt-12">
        <div class="max-w-7xl mx-auto px-4 lg:px-6">
            <div class="grid gap-8 md:grid-cols-3">
                <!-- Contact Info -->
                <div>
                    <h3 class="font-semibold text-lg mb-4">Hubungi Kami</h3>
                    <address class="not-italic space-y-3">
                        <div class="flex items-start gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mt-1 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                            </svg>
                            <p class="text-sm">Jl. Wisata Menanggal No.38, Dukuh Menanggal, Kec. Gayungan, Surabaya, Jawa Timur 60234</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                            </svg>
                            <p class="text-sm">(031) 8290186</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                            </svg>
                            <p class="text-sm">dlh@jatimprov.go.id</p>
                        </div>
                    </address>
                </div>

                <!-- Links -->
                <div>
                    <h3 class="font-semibold text-lg mb-4">Tautan</h3>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-sm hover:underline">Beranda</a></li>
                        <li><a href="tentang.html" class="text-sm hover:underline">Tentang BERSERI</a></li>
                        <li><a href="panduan.html" class="text-sm hover:underline">Panduan</a></li>
                    </ul>
                </div>

                <!-- Social Media -->
                <div>
                    <h3 class="font-semibold text-lg mb-4">Media Sosial</h3>
                    <div class="flex items-center gap-2">
                        <a href="https://facebook.com/BerseriJatim" target="_blank" rel="noopener noreferrer" 
                           class="text-white hover:text-emerald-200 transition-colors">
                            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"/>
                            </svg>
                            <span class="text-sm">BerseriJatim</span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="text-center pt-8 mt-8 border-t border-emerald-700">
                <p class="text-sm">Â© <span id="year">2023</span> BERSERI - Dinas Lingkungan Hidup Provinsi Jawa Timur</p>
            </div>
        </div>
    </footer>


  <!-- Wizard asli -->
  <script src="js/form.js" defer></script>

<!-- Tambahan kecil: kalkulasi, toggle TPS, upload UI, dan sinkronisasi progress bar -->
<script>
  /* =========================
     Util: parsing angka ID (1.234,56 â†’ 1234.56)
     ========================= */
  function parseIDNumber(v) {
    if (v == null) return NaN;
    let s = String(v).trim();
    if (!s) return NaN;
    // Jika ada koma, anggap itu desimal; titik dianggap pemisah ribuan
    if (s.includes(',')) {
      s = s.replace(/\./g, '').replace(',', '.');
    }
    return parseFloat(s);
  }
  function fmt2(n) {
    if (isNaN(n)) return '';
    // tampilkan maks 2 desimal, tapi hilangkan .00
    const s = n.toFixed(2);
    return s.endsWith('.00') ? s.slice(0, -3) : s;
  }

  /* =========================
     Kalkulator timbulan
     Timbulan = Penduduk Ã— Estimasi Ã— 30
     ========================= */
  function hitungTimbulan() {
    const pendudukEl = document.getElementById('penduduk');
    const estimasiEl = document.getElementById('estimasi');
    const out = document.getElementById('timbulan_total');
    if (!pendudukEl || !estimasiEl || !out) return;

    // pastikan kolom hasil readonly
    out.readOnly = true;
    out.classList.add('bg-gray-100');

    const penduduk = parseIDNumber(pendudukEl.value);
    const estimasi = parseIDNumber(estimasiEl.value);

    if (penduduk > 0 && estimasi > 0) {
      const hasil = penduduk * estimasi * 30;
      out.value = fmt2(hasil);
    } else {
      out.value = '';
    }
  }
  ['penduduk', 'estimasi'].forEach(id => {
  const el = document.getElementById(id);
  if (el) {  // Fixed syntax error here
    el.addEventListener('input', hitungTimbulan);
    el.addEventListener('change', hitungTimbulan);
    // cegah scroll mouse mengubah angka tanpa sengaja
    el.addEventListener('wheel', e => e.target.type === 'number' && e.target === document.activeElement && e.preventDefault(), { passive: false });
  }
});

  /* =========================
     TPS toggle
     ========================= */
  function syncTPS() {
    const ya = document.querySelector('input[name="punya_tps"][value="ya"]');
    const wrap = document.getElementById('wrap_masuk_tps');
    const input = document.getElementById('masuk_tps_2024');
    if (!wrap || !input) return;
    const checkedYa = ya && ya.checked;
    wrap.classList.toggle('hidden', !checkedYa);
    input.toggleAttribute('required', checkedYa);
    if (!checkedYa) input.value = '';
  }
  document.addEventListener('change', (e) => {
    if (e.target && e.target.name === 'punya_tps') syncTPS();
  });

  /* =========================
     Upload UI (tampilkan nama + cek ukuran)
     ========================= */
  function setupPicker(btnSelector, inputId, labelId, maxMB){
    const btns = document.querySelectorAll(btnSelector);
    btns.forEach(btn=>{
      const targetSel = btn.getAttribute('data-pick');
      const input = document.querySelector(targetSel);
      const label = document.getElementById(labelId);
      if (!input) return;
      btn.addEventListener('click', ()=> input.click());
      input.addEventListener('change', ()=>{
        if (!input.files || !input.files[0]) { if(label) label.textContent=''; return; }
        const f = input.files[0];
        const ok = f.size <= maxMB * 1024 * 1024;
        if (!ok) {
          alert('Ukuran file melebihi ' + maxMB + ' MB');
          input.value = '';
          if (label) label.textContent = '';
          return;
        }
        if (label) label.textContent = 'â€¢ ' + f.name + ' (' + (f.size/1024/1024).toFixed(2) + ' MB)';
      });
    });
  }

  /* =========================
     Progress bar sinkron step
     ========================= */
  function updateProgress() {
    const steps = Array.from(document.querySelectorAll('.form-step'));
    const fill = document.getElementById('progressFill');
    const activeIndex = steps.findIndex(s => !s.classList.contains('hidden'));
    const total = steps.length;
    if (fill && activeIndex >= 0) {
      const pct = Math.max(5, Math.round(((activeIndex + 1) / total) * 100)) - 2; // padding visual
      fill.style.width = pct + '%';
    }
  }

  /* =========================
     Init
     ========================= */
  document.addEventListener('DOMContentLoaded', ()=>{
    syncTPS(); hitungTimbulan(); updateProgress();

    setupPicker('[data-pick="#file_foto"]', 'file_foto', 'file_foto_name', 1);
    setupPicker('[data-pick="#file_sertifikat"]', 'file_sertifikat', 'file_sertifikat_name', 1);
    setupPicker('[data-pick="#file_piagam"]', 'file_piagam', 'file_piagam_name', 10);

    const prev = document.getElementById('prevBtn');
    const next = document.getElementById('nextBtn');
    [prev, next].forEach(b => b && b.addEventListener('click', () => setTimeout(updateProgress, 0)));

    // bila ada perubahan layout yang memicu transisi
    const form = document.getElementById('usulanForm');
    form && form.addEventListener('transitionend', updateProgress);

    // Add to form.html script section
    document.getElementById('saveDraftBtn').addEventListener('click', function() {
        const formData = {
            tipe_wilayah: document.querySelector('input[name="tipe_wilayah"]:checked')?.value || '',
            nama_desa: document.getElementById('nama-desa')?.value || '',
            kecamatan: document.getElementById('kecamatan')?.value || '',
            kabkota: document.getElementById('kabkota')?.value || '',
            kategori: document.querySelector('input[name="kategori"]:checked')?.value || ''
        };
        
        // Save to localStorage
        localStorage.setItem('usulan_form_data', JSON.stringify(formData));
        console.log('Draft saved:', formData);
    });
  });
</script>
</body>
</html>

